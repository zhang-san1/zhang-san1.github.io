import{_ as s,W as a,X as e,Y as n}from"./framework-6447176f.js";const l={},i=n(`<h1 id="linux-安装-mysql" tabindex="-1"><a class="header-anchor" href="#linux-安装-mysql" aria-hidden="true">#</a> linux 安装 mysql</h1><h4 id="首先查看系统中是否安装了mysql" tabindex="-1"><a class="header-anchor" href="#首先查看系统中是否安装了mysql" aria-hidden="true">#</a> 首先查看系统中是否安装了mysql</h4><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-qa</span> <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果有就删除</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">-e</span> <span class="token parameter variable">--nodeps</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="yum安装mysql" tabindex="-1"><a class="header-anchor" href="#yum安装mysql" aria-hidden="true">#</a> yum安装mysql</h4><p>使用wget命令下载：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>下载后开始安装mysql包</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> mysql57-community-release-el7-10.noarch.rpm 
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后就可以开始安装mysql了。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token parameter variable">-y</span> <span class="token function">install</span> mysql-community-server
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>查看是否安装成功</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> mysql
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="mysql启动与关闭" tabindex="-1"><a class="header-anchor" href="#mysql启动与关闭" aria-hidden="true">#</a> mysql启动与关闭</h3><p>启动</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">service</span> mysqld start
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>重启</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">service</span> mysqld restart
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>关闭mysql</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">service</span> mysqld stop
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>开机自启动</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">chkconfig</span> mysqld on
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>安装mysql-connector-java</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>yum <span class="token function">install</span> <span class="token parameter variable">-y</span> mysql-connector-java
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="mysql登录" tabindex="-1"><a class="header-anchor" href="#mysql登录" aria-hidden="true">#</a> mysql登录</h3><p>当我们安装完毕mysql后，系统会默认生成随机密码，我们可以通过以下命令查看，找到初次登录需要的密码。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">more</span> /var/log/mysqld.log <span class="token operator">|</span> <span class="token function">grep</span> password
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>找到之后我们就可以登录。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>回车后输入密码，可提高安全性。</p><p>登录之后如果我们想要进行操作，首先要修改密码。需要注意的是密码不能设置的太简单，否者会报错。 密码规则：至少八位，包括大小写和字符。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>SET PASSWORD <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">&#39;密码&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="开启mysql远程服务" tabindex="-1"><a class="header-anchor" href="#开启mysql远程服务" aria-hidden="true">#</a> 开启mysql远程服务</h3><p>完成了以上操作我们就可以在linux上来操作mysql了，但是如果我们想要远程访问的话还需要对外开放mysql的3306端口，或者直接关闭防火墙。</p><p>赋予权限</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>grant all privileges on *.* to <span class="token string">&#39;root&#39;</span> @<span class="token string">&#39;%&#39;</span> identified by <span class="token string">&#39;root&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>更新权限</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>flush privileges<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>开启3306端口或者关闭防火墙。这里也有一个坑，centos7的防火墙已经更改为了firewall而不再是iptables.</p><p>开放3306端口</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>firewall <span class="token parameter variable">-cmd</span> <span class="token parameter variable">--permanent</span> <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">3306</span>/tcp
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>重启防火墙</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl restart firewalld
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可以通过查看开放的端口，判断自己是否成功。</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-ports
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果嫌以上步骤比较麻烦，那就使用终极大招——关闭防火墙</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>systemctl stop firewalld.service
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>源 “MySQL 5.7 Community Server“ 的 GPG 密钥已安装，但是不适用于此软件包。请检查源的公钥 URL 是否配置正确 和 报错：\`ERROR 1045 (28000</p><p>执行</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">rpm</span> <span class="token parameter variable">--import</span> https://repo.mysql.com/RPM-GPG-KEY-mysql-2022
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>mysql&gt; SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; = PASSWORD(&#39;123&#39;); ERROR 1819 (HY000): Your password does not satisfy the current policy requirements</p><p>原来MySQL5.6.6版本之后增加了密码强度验证插件validate_password，相关参数设置的较为严格。 使用了该插件会检查设置的密码是否符合当前设置的强度规则，若不满足则拒绝设置。影响的语句和函数有：create user,grant,set password,password(),old password。</p><p>解决</p><p>1） 查看mysql全局参数配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code> mysql<span class="token operator">&gt;</span> <span class="token keyword">select</span> @@validate_password_policy<span class="token punctuation">;</span>
 mysql<span class="token operator">&gt;</span> SHOW VARIABLES LIKE <span class="token string">&#39;validate_password%&#39;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>2）参数解释</p><p>validate_password_dictionary_file 插件用于验证密码强度的字典文件路径。</p><p>validate_password_length 密码最小长度，参数默认为8，它有最小值的限制，最小值为：validate_password_number_count + validate_password_special_char_count + (2 * validate_password_mixed_case_count)</p><p>validate_password_mixed_case_count 密码至少要包含的小写字母个数和大写字母个数。</p><p>validate_password_number_count 密码至少要包含的数字个数。</p><p>validate_password_policy 密码强度检查等级，0/LOW、1/MEDIUM、2/STRONG。有以下取值： Policy Tests Performed<br> 0 or LOW Length<br> 1 or MEDIUM Length; numeric, lowercase/uppercase, and special characters<br> 2 or STRONG Length; numeric, lowercase/uppercase, and special characters; dictionary file<br> 默认是1，即MEDIUM，所以刚开始设置的密码必须符合长度，且必须含有数字，小写或大写字母，特殊字符。</p><p>validate_password_special_char_count 密码至少要包含的特殊字符数。</p><p>3）修改mysql参数配置</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> global <span class="token assign-left variable">validate_password_policy</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> global <span class="token assign-left variable">validate_password_mixed_case_count</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>


mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> global <span class="token assign-left variable">validate_password_number_count</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>

mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> global <span class="token assign-left variable">validate_password_special_char_count</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

 
mysql<span class="token operator">&gt;</span> <span class="token builtin class-name">set</span> global <span class="token assign-left variable">validate_password_length</span><span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>

 
mysql<span class="token operator">&gt;</span> SHOW VARIABLES LIKE <span class="token string">&#39;validate_password%&#39;</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>4）修改简单密码：</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql<span class="token operator">&gt;</span> SET PASSWORD FOR <span class="token string">&#39;root&#39;</span>@<span class="token string">&#39;localhost&#39;</span> <span class="token operator">=</span> PASSWORD<span class="token punctuation">(</span><span class="token string">&#39;root&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>导入sql文件</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>mysql <span class="token parameter variable">-uroot</span> <span class="token parameter variable">-p</span>

<span class="token builtin class-name">source</span> /home/amendmentplatform.sql<span class="token punctuation">;</span>

show databases<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,69),r=[i];function p(d,t){return a(),e("div",null,r)}const o=s(l,[["render",p],["__file","Record007.html.vue"]]);export{o as default};
