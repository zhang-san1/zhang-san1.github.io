import{_ as n,W as s,X as a,Y as t}from"./framework-6447176f.js";const e={},p=t(`<h1 id="递归获取子节点" tabindex="-1"><a class="header-anchor" href="#递归获取子节点" aria-hidden="true">#</a> 递归获取子节点</h1><p>pojo</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DirectoriesEntity</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * 目录id
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> directoryId<span class="token punctuation">;</span>
    <span class="token doc-comment comment">/**
     * 目录名称
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> directoryName<span class="token punctuation">;</span>
  
    <span class="token doc-comment comment">/**
     * 目录父级id
     */</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> parentId<span class="token punctuation">;</span>


    <span class="token keyword">private</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DirectoriesEntity</span><span class="token punctuation">&gt;</span></span> children<span class="token punctuation">;</span>
    <span class="token comment">//省略set get 方法</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>controller</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/getAllDirectoryByRootDirctory&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@ApiOperation</span><span class="token punctuation">(</span><span class="token string">&quot;根据根目录查询所有目录&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Result</span> <span class="token function">getAllDirectoryByRootDirctory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@RequestParam</span> <span class="token class-name">Integer</span> parentId<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DirectoriesEntity</span><span class="token punctuation">&gt;</span></span> directory <span class="token operator">=</span> directoriesService<span class="token punctuation">.</span><span class="token function">getAllDirectoryByRootDirctory</span><span class="token punctuation">(</span>parentId<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//根节点父级ID -1</span>
        <span class="token keyword">return</span> <span class="token class-name">Result</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span>directory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>service</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DirectoriesEntity</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllDirectoryByRootDirctory</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> parentId<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DirectoriesEntity</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">DirectoriesEntitylist</span> <span class="token operator">=</span> directoriesMapper<span class="token punctuation">.</span><span class="token function">getAllDirectoryByRootDirctory</span><span class="token punctuation">(</span>parentId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">DirectoriesEntitylist</span><span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">DirectoriesEntity</span> list <span class="token operator">:</span> <span class="token class-name">DirectoriesEntitylist</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DirectoriesEntity</span><span class="token punctuation">&gt;</span></span> subDirectoriesEntitylist <span class="token operator">=</span> <span class="token function">getAllDirectoryByRootDirctory</span><span class="token punctuation">(</span>list<span class="token punctuation">.</span><span class="token function">getDirectoryId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//获取以当前目录ID为父级目录的节点</span>
                list<span class="token punctuation">.</span><span class="token function">setChildren</span><span class="token punctuation">(</span>subDirectoriesEntitylist<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        
        <span class="token keyword">return</span> <span class="token class-name">DirectoriesEntitylist</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>mapper</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DirectoriesEntity</span><span class="token punctuation">&gt;</span></span> <span class="token function">getAllDirectoryByRootDirctory</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;parentId&quot;</span><span class="token punctuation">)</span> <span class="token class-name">Integer</span> parentId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>mapper.xml</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getAllDirectoryByRootDirctory<span class="token punctuation">&quot;</span></span> <span class="token attr-name">parameterType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Integer<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultMap</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>DirectoriesGroupsMap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        select
            *
        from 
            tbl_directories 
        where 
            parent_id = #{parentId}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),c=[p];function o(i,l){return s(),a("div",null,c)}const r=n(e,[["render",o],["__file","Record005.html.vue"]]);export{r as default};
